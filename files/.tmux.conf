set-option -g prefix C-Space
unbind-key C-b
bind-key C-Space send-prefix

set -g @override_copy_command 'xsel -i --clipboard'
set -g @yank_selection_mouse 'clipboard'
set -g @yank_selection 'primary'

bind -n M-q split-window -v -c "#{pane_current_path}"
bind -n M-w split-window -h -c "#{pane_current_path}"

bind -n C-n new-window -c "#{pane_current_path}"

bind-key r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded."

set-environment -g TERM "tmux-256color"
set -g default-terminal "tmux-256color"

set-option -g history-limit 5000
set-option -g status-position top

set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm' # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m' # underscore colours - needs tmux-3.0

# set the statusline color (default is transparent, color256)
set -g status-left-style bg=default,fg=colour207,bold
set -g status-style bg=default,fg=colour117,bold
set -g status-right-style bg=default,fg=colour102,bold

set -g status-right "#T"

# set pane border colors
set -g pane-border-style fg=colour238
set -g pane-active-border-style fg=colour161

set -g mouse on

# tpm plugin
set -g @plugin "tmux-plugins/tpm"

# tmux plugins
set -g @plugin "christoomey/vim-tmux-navigator"
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-logging'
set -g @plugin "tmux-plugins/tmux-resurrect"
set -g @plugin "tmux-plugins/tmux-continuum"
set -g @plugin "omerxx/tmux-sessionx"

# initialize tpm (keep at bottom of tmux.conf)
run "~/.tmux/plugins/tpm/tpm"

# Automatically sync with system clipboard (tmux 3.2+)
set -g set-clipboard on

# Force Emacs-style keys in copy-mode (optional)
setw -g mode-keys emacs

# Copy-mode key bindings
bind -T copy-mode Space send-keys -X begin-selection
bind -T copy-mode Enter send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -i"
